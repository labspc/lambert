# ä»è¿­ä»£å™¨åˆ°å¤šæ€ï¼šæ·±å…¥ç†è§£ C++ ç¼–ç¨‹ä¸­çš„æ ¸å¿ƒæ¦‚å¿µ
ppp2e è¿›é˜¶ç‰ˆç–‘éš¾åˆé›†

## 0.ğŸŠ

> è½¯ä»¶è®¾è®¡çš„ç†å¿µä¸æ˜¯æ„é€ ä¸€ä¸ªå¯ä»¥åšä»»ä½•äº‹æƒ…çš„ç¨‹åºï¼Œè€Œæ˜¯æ„é€ å¾ˆå¤šç±»ï¼Œè¿™äº›ç±»å¯ä»¥å‡†ç¡®åæ˜ æˆ‘ä»¬çš„æ€æƒ³ï¼Œå¯ä»¥ç»„åˆåœ¨ä¸€èµ·å·¥ä½œï¼Œå…è®¸æˆ‘ä»¬æ¥æ„é€ æ¼‚äº®çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å…·æœ‰æœ€å°çš„å·¥ä½œé‡ï¼ˆç›¸å¯¹äºä»»åŠ¡çš„å¤æ‚åº¦è€Œè¨€ï¼‰ã€è¶³å¤Ÿé«˜çš„æ€§èƒ½ä»¥åŠä¿è¯äº§ç”Ÿæ­£ç¡®çš„ç»“æœç­‰ä¼˜ç‚¹ã€‚


## 1.è¿­ä»£å™¨ iterator

ã€Šppp2eã€‹p8 æœ‰å…³

![img](https://img.imotao.com/i/2024/03/28/66045501acc01.png)

è¿­ä»£å™¨ä½œä¸ºä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œåœ¨ C++ ä¸­æœ‰å¾ˆé‡è¦çš„åœ°ä½ã€‚æˆ‘ä»¬æŠŠè¿­ä»£å™¨ç†è§£æˆå­˜å‚¨ç»†èŠ‚å’Œä½¿ç”¨æ–¹æ³•ä¹‹é—´çš„æ¡¥æ¢å³å¯ã€‚


> è¿­ä»£å™¨ï¼ˆiteratorsï¼‰æ˜¯ä¸€ä¸ªè¶…çº§æ¥å£ï¼ æ˜¯å¯ä»¥éå†é›†åˆçš„å¯¹è±¡ï¼Œä¸ºå„ç§å®¹å™¨æä¾›äº†å…¬å…±çš„æ“ä½œæ¥å£ï¼Œéš”ç¦»å¯¹å®¹å™¨çš„éå†æ“ä½œå’Œåº•å±‚å®ç°ï¼Œä»è€Œè§£è€¦ã€‚
> è¿­ä»£å™¨æ˜¯ç±»ä¼¼æŒ‡é’ˆä¸€æ ·çš„ä¸œè¥¿ï¼Œå› ä¸ºå®ƒçš„ç”¨æ³•å°±æ˜¯æ¨¡æ‹ŸæŒ‡é’ˆï¼Œä½†æ˜¯å®ƒä¸æ˜¯æŒ‡é’ˆã€‚
> è¿­ä»£å™¨æ˜¯è¡Œä¸ºå‹ è®¾è®¡æ¨¡å¼ ï¼Œæä¾›äº†ä¸€ç§æ–¹æ³•æ¥éå†ä¸€ä¸ªèšåˆçš„å®¹å™¨(é›†åˆ)ä¸­çš„å„ä¸ªå…ƒç´ ï¼Œè€Œä¸ç”¨æš´éœ²å…¶å†…éƒ¨çš„è¡¨ç¤ºã€‚
> å¯¹äºå®¹å™¨çš„è®¿é—®è€Œä¸éœ€è¦å…³æ³¨å®¹å™¨å†…éƒ¨çš„å®ç°ç»†èŠ‚ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ç®¡ä½ æ˜¯ä»€ä¹ˆå®¹å™¨ï¼Œéƒ½å¯ä»¥ç”¨è¿­ä»£å™¨è¿›è¡Œéå†æ“ä½œå’Œåº•å±‚å®ç°ã€‚
> 
> https://zhuanlan.zhihu.com/p/548591910

ç®€å•æ‰¾äº†å‡ ä¸ªç­”æ¡ˆè¯»äº†ä¸‹ï¼Œé…åˆä¹¦ä¸­é™„å›¾ã€‚å¦‚æœæ¡¥æ¢ä¸å¥½ç†è§£ï¼Œè¿™é‡Œè¯´çš„è¶…çº§æ¥å£ï¼Œå¯èƒ½æ›´å¥½ç†è§£ã€‚æˆ‘ä»¬çŸ¥é“ï¼ŒSTL æä¾›äº†å¾ˆå¤šå®¹å™¨ï¼Œå®¹å™¨æ€ä¹ˆç”¨ï¼Ÿ æ¥è¯´è¯´å®¹å™¨å’Œè¿­ä»£å™¨çš„å…³ç³»ï¼Œè¿™é‡Œåªææ¥å£çš„å…³ç³»ï¼š

1. **æä¾›è®¿é—®æœºåˆ¶**ï¼š

- å®¹å™¨æä¾›äº†æ•°æ®çš„å­˜å‚¨å’Œç»„ç»‡ç»“æ„ï¼Œè€Œè¿­ä»£å™¨åˆ™**æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶**ï¼Œå…è®¸ç”¨æˆ·å¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œéå†ã€è®¿é—®å’Œä¿®æ”¹ã€‚

2. **å°è£…åº•å±‚å®ç°**ï¼š

- è¿­ä»£å™¨å°è£…äº†å¯¹å®¹å™¨åº•å±‚æ•°æ®ç»“æ„çš„è®¿é—®ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦äº†è§£å®¹å™¨å†…éƒ¨çš„å…·ä½“å®ç°ç»†èŠ‚å°±èƒ½å¤Ÿå¯¹å®¹å™¨ä¸­çš„å…ƒç´ è¿›è¡Œæ“ä½œã€‚

3. **ç»Ÿä¸€çš„è®¿é—®æ¥å£**ï¼š

- å°½ç®¡ä¸åŒç±»å‹çš„å®¹å™¨å…·æœ‰ä¸åŒç±»å‹çš„è¿­ä»£å™¨ï¼Œä½†å®ƒä»¬éƒ½éµå¾ªäº†ç›¸åŒçš„è®¿é—®æ¥å£ï¼Œä¾‹å¦‚**begin()**å’Œ**end()**æ–¹æ³•ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨**ç»Ÿä¸€çš„æ–¹å¼æ¥éå†**å„ç§å®¹å™¨ã€‚

ä»ä¸‹é¢è¿™ä¸ª demo æ¥çœ‹çœ‹ iterator çš„å…·ä½“ç”¨æ³•ï¼š

```cpp
#include <iostream>
#include <vector>

int main() {
    // åˆ›å»ºä¸€ä¸ªæ•´æ•°å‘é‡
    std::vector<int> vec = {1, 2, 3, 4, 5};

    // ä½¿ç”¨è¿­ä»£å™¨éå†å‘é‡å¹¶è¾“å‡ºæ¯ä¸ªå…ƒç´ 
    std::cout << "Original vector: ";
    for (std::vector<int>::iterator it = vec.begin(); it != vec.end(); ++it) {   
        // itæ˜¯å®šä¹‰çš„ä¸€ä¸ªè¿­ä»£å™¨å˜é‡ï¼Œå¯ä»¥ç†è§£å…¶ç±»å‹ä¸ºstd::vector<int>::iterator
        // è€Œå= æ˜¯ä¸€ä¸ªèµ‹å€¼ vec.begin()ï¼Œå…·ä½“è§£é‡Šä¸ºï¼švec.begin()ï¼šè¿”å›æŒ‡å‘å‘é‡ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨

        std::cout << *it << " ";  // è¿™é‡Œå›å¿†æŒ‡é’ˆçš„ç”¨æ³•ï¼Œ*è§£å¼•ç”¨åè·å–itå˜é‡æŒ‡åˆ°çš„å…ƒç´ ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æ€è€ƒè¿™å¥è¯ï¼š
        // è¿­ä»£å™¨æ¨¡æ‹ŸæŒ‡é’ˆçš„ç”¨æ³•ï¼Œä½†æ˜¯åº•å±‚ä¸æ˜¯æŒ‡é’ˆ 
    }
    std::cout << std::endl;

    // ä½¿ç”¨è¿­ä»£å™¨ä¿®æ”¹å‘é‡ä¸­çš„å…ƒç´ 
    std::cout << "Modified vector: ";
    for (std::vector<int>::iterator it = vec.begin(); it != vec.end(); ++it) {
        *it *= 2; // å°†æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2  // å¾ªç¯ä½“è¦åšçš„äº‹æƒ…
        std::cout << *it << " ";
    }
    std::cout << std::endl;

    return 0;
}
```

![img](https://img.imotao.com/i/2024/03/28/66045500b57f6.png)



é‡ç‚¹çœ‹è¿™ä¸ªç‰‡æ®µçš„åˆ†æï¼š

```cpp
std::vector<int> vec = {1, 2, 3, 4, 5};

    // ä½¿ç”¨è¿­ä»£å™¨éå†å‘é‡å¹¶è¾“å‡ºæ¯ä¸ªå…ƒç´ 
    std::cout << "Original vector: ";
    for (std::vector<int>::iterator it = vec.begin(); it != vec.end(); ++it) {   
        // itæ˜¯å®šä¹‰çš„ä¸€ä¸ªè¿­ä»£å™¨å˜é‡ï¼Œå¯ä»¥ç†è§£å…¶ç±»å‹ä¸ºstd::vector<int>::iterator
        // è€Œå= æ˜¯ä¸€ä¸ªèµ‹å€¼ vec.begin()ï¼Œå…·ä½“è§£é‡Šä¸ºï¼švec.begin()ï¼šè¿”å›æŒ‡å‘å‘é‡ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¿­ä»£å™¨

        std::cout << *it << " ";  // è¿™é‡Œå›å¿†æŒ‡é’ˆçš„ç”¨æ³•ï¼Œ*è§£å¼•ç”¨åè·å–itå˜é‡æŒ‡åˆ°çš„å…ƒç´ ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥æ€è€ƒè¿™å¥è¯ï¼š
        // è¿­ä»£å™¨æ¨¡æ‹ŸæŒ‡é’ˆçš„ç”¨æ³•ï¼Œä½†æ˜¯åº•å±‚ä¸æ˜¯æŒ‡é’ˆ 
    }
    std::cout << std::endl;
```

è¿™æ®µä¹Ÿå¯ä»¥æŠ½è±¡å‡ºä¸€ä¸ªæ›´åŠ é€šç”¨çš„ä½¿ç”¨å½¢å¼ï¼š

```cpp
for (std::vector<T>::iterator it = vec.begin(); it != vec.end(); ++it) {
    // ä½¿ç”¨ *it è®¿é—®å½“å‰å…ƒç´ 
}
```

## 2.å¸¸è§å®¹å™¨ä¸€è§ˆ

p27

![img](https://img.imotao.com/i/2024/03/28/66045501acfd5.png)

å¾€åçœ‹ä¼šå‘ç°ï¼Œvector éå¸¸å¥½ç”¨ï¼Œç›®å‰é˜¶æ®µèƒ½ç”¨ vector è§£å†³çš„å°±ç”¨ vector æ¥è§£å†³ï¼Œä¸ç”¨èŠ±é‡Œèƒ¡å“¨çš„ã€‚

## 3.lambda è¡¨è¾¾å¼

åœ¨ ppp2e ä¸­è®²è§£çš„ç¯‡å¹…ä¸å¤šï¼Œåœ¨ä¹‹å‰è¯» python çš„æ—¶å€™ï¼Œé‡åˆ°è¿‡ python çš„ lambda å…³é”®å­—æ¥å®šä¹‰åŒ¿åå‡½æ•°ã€‚ç°åœ¨æˆ‘ä»¬å…ˆé€šè¿‡å®šä¹‰æ¥çœ‹çœ‹ C++ lambda çš„è¯­æ³•å®šä¹‰æ˜¯æ€ä¹ˆæ ·ï¼Œä½¿ç”¨åœºæ™¯åˆæ˜¯ä»€ä¹ˆã€‚

### 3.1 å®šä¹‰

ä»¥ä¸‹æ˜¯Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•ï¼š

```cpp
[capture list] (parameters) -> return_type {
    // lambda body
}
```

- **capture list**ï¼šæ•è·åˆ—è¡¨ï¼Œç”¨äºæ•è·å¤–éƒ¨å˜é‡ï¼Œå¯ä»¥æ˜¯ç©ºçš„ã€å¼•ç”¨æ•è·æˆ–å€¼æ•è·ã€‚
- **parameters**ï¼šå‚æ•°åˆ—è¡¨ï¼Œç±»ä¼¼äºå‡½æ•°å‚æ•°åˆ—è¡¨ã€‚
- **return_type**ï¼šè¿”å›ç±»å‹ï¼Œå¯ä»¥çœç•¥ï¼Œæ ¹æ®lambdaè¡¨è¾¾å¼çš„å†…å®¹è‡ªåŠ¨æ¨æ–­ã€‚
- **lambda body**ï¼šlambdaå‡½æ•°ä½“ï¼ŒåŒ…å«äº†å…·ä½“çš„æ“ä½œé€»è¾‘ã€‚

### 3.2 ä½¿ç”¨

å…·ä½“åŒ– demoï¼š

```cpp
#include <iostream>

int main() {
    int x = 5, y = 3;

    // Lambdaè¡¨è¾¾å¼ç”¨äºè®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ
    auto sum = [](int a, int b) { return a + b; };

    // è°ƒç”¨Lambdaè¡¨è¾¾å¼è®¡ç®—å’Œå¹¶è¾“å‡ºç»“æœ
    std::cout << "Sum: " << sum(x, y) << std::endl;

    return 0;
}
```

ç°åœ¨è®©æˆ‘ä»¬å°†C++çš„Lambdaè¡¨è¾¾å¼ä¸Pythonçš„Lambdaè¡¨è¾¾å¼è¿›è¡Œæ¯”è¾ƒï¼š

1. **è¯­æ³•**ï¼š

- C++çš„Lambdaè¡¨è¾¾å¼çš„è¯­æ³•æ›´åŠ å¤æ‚ï¼Œéœ€è¦æŒ‡å®šæ•è·åˆ—è¡¨å’Œå‚æ•°åˆ—è¡¨ï¼Œå¹¶ä¸”æ”¯æŒæ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹ã€‚
- Pythonçš„Lambdaè¡¨è¾¾å¼è¯­æ³•æ›´åŠ ç®€æ´ï¼Œåªéœ€è¦ä½¿ç”¨å…³é”®å­—**lambda**å’Œå‚æ•°åˆ—è¡¨ï¼Œä¸éœ€è¦æŒ‡å®šè¿”å›ç±»å‹ï¼Œå› ä¸ºå®ƒæ˜¯åŠ¨æ€ç±»å‹è¯­è¨€ã€‚

1. **ä½œç”¨**ï¼š

- åœ¨C++ä¸­ï¼ŒLambdaè¡¨è¾¾å¼é€šå¸¸ç”¨äºåˆ›å»ºå‡½æ•°å¯¹è±¡ï¼Œç”¨ä½œSTLç®—æ³•ä¸­çš„è°“è¯ã€å‡½æ•°å‚æ•°æˆ–è¿”å›å€¼ç­‰ã€‚
- åœ¨Pythonä¸­ï¼ŒLambdaè¡¨è¾¾å¼é€šå¸¸ç”¨äºåˆ›å»ºç®€å•çš„åŒ¿åå‡½æ•°ï¼Œé€šå¸¸ç”¨äºå‡½æ•°å¼ç¼–ç¨‹é£æ ¼ä¸­çš„é«˜é˜¶å‡½æ•°ã€åˆ—è¡¨è§£æç­‰ã€‚

1. **æ•è·å¤–éƒ¨å˜é‡**ï¼š

- åœ¨C++ä¸­ï¼ŒLambdaè¡¨è¾¾å¼å¯ä»¥é€šè¿‡æ•è·åˆ—è¡¨æ•è·å¤–éƒ¨å˜é‡ï¼ŒåŒ…æ‹¬å€¼æ•è·å’Œå¼•ç”¨æ•è·ã€‚
- åœ¨Pythonä¸­ï¼ŒLambdaè¡¨è¾¾å¼å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†æ˜¯ä¸èƒ½è¿›è¡Œä¿®æ”¹ï¼Œå› ä¸ºå®ƒä»¬æ˜¯â€œçº¯â€å‡½æ•°ã€‚

```cpp
auto value_capture = [x, y]() {
    std::cout << "Value capture: x = " << x << ", y = " << y << std::endl;
};
// () å‚æ•°å¯ä»¥ä¸ºç©º
```

Lambdaè¡¨è¾¾å¼çš„å€¼æ•è·ä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨Lambdaå†…éƒ¨ä½¿ç”¨å¤–éƒ¨å˜é‡çš„å€¼ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒå¤–éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™ç§ç‰¹æ€§ä½¿å¾—Lambdaè¡¨è¾¾å¼åœ¨C++ä¸­éå¸¸çµæ´»å’Œå®ç”¨ã€‚

## 4.å…³è”å®¹å™¨

p46

![img](https://img.imotao.com/i/2024/03/28/66045500b6c10.png)

å…³è”å®¹å™¨çš„åº•å±‚å®ç°ä¸»è¦ä½¿ç”¨å¹³è¡¡æœç´¢äºŒå‰æ ‘å’Œå“ˆå¸Œè¡¨å®ç°çš„ï¼Œæœ‰é”®å€¼å¯¹çš„æ¦‚å¿µï¼Œè€Œåºåˆ—å®¹å™¨æ²¡æœ‰ã€‚è¿™ä¸ªï¼Œå…·ä½“çš„å¯¹æ¯”åœ¨è¿™é‡Œä¸æåŠï¼Œå…·ä½“ä½¿ç”¨åˆ°äº†å†è¯´ã€‚

## 5.è™šå‡½æ•°ä¸å¤šæ€æ€§

è¿™ä¸€èŠ‚æœ‰ç‚¹éš¾ç†è§£ï¼Œæˆ‘è¯» ppp2e çš„æ—¶å€™å°±å¡åœ¨è¿™é‡Œäº†ã€‚

p129

![img](https://img.imotao.com/i/2024/03/28/6604550137e6d.png)

ä¹¦ä¸­è§£é‡Šçš„å¾ˆæŠ½è±¡ï¼Œä»€ä¹ˆæ˜¯è™šå‡½æ•°ï¼Ÿä»€ä¹ˆæ˜¯è¿è¡Œæ—¶å¤šæ€ï¼Ÿè¿˜æœ‰è™šå‡½æ•°èƒŒåçš„æœºåˆ¶ï¼Œæ¯”å¦‚è™šå‡½æ•°æŒ‡é’ˆã€è™šå‡½æ•°è¡¨ï¼Œè¿™äº›éƒ½æ˜¯æ¯”è¾ƒå¤æ‚çš„æ¦‚å¿µã€‚

å€ŸåŠ© ChatGPT æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼š

å‡è®¾ä½ æœ‰ä¸€ä»½ä½œä¸šï¼Œéœ€è¦æ±‚ä¸€ä¸ªå½¢çŠ¶çš„é¢ç§¯ã€‚ä½ çŸ¥é“æœ‰å¾ˆå¤šç§å½¢çŠ¶ï¼Œæ¯”å¦‚åœ†å½¢ã€çŸ©å½¢ã€ä¸‰è§’å½¢ç­‰ã€‚ä½ å¸Œæœ›å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä»»ä½•å½¢çŠ¶çš„é¢ç§¯ï¼Œä½†æ˜¯ä¸åŒçš„å½¢çŠ¶è®¡ç®—é¢ç§¯çš„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªåŸºç±» Shapeï¼Œå¹¶åœ¨å…¶ä¸­å£°æ˜ä¸€ä¸ªè™šå‡½æ•° calculateArea()ã€‚ç„¶åï¼Œæ¯ä¸ªå…·ä½“çš„å½¢çŠ¶ç±»ï¼ˆå¦‚ Circleã€Rectangleã€Triangle ç­‰ï¼‰éƒ½å¯ä»¥è¦†ç›–ï¼ˆé‡å†™ï¼‰è¿™ä¸ªè™šå‡½æ•°ï¼Œä»¥å®ç°å„è‡ªç‰¹å®šå½¢çŠ¶çš„é¢ç§¯è®¡ç®—æ–¹æ³•ã€‚

è¿™å°±å¥½æ¯”ä½ å‘Šè¯‰ä½ çš„æœ‹å‹ï¼Œâ€œæˆ‘è¦å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å½¢çŠ¶çš„é¢ç§¯ï¼Œä½†æ˜¯ä¸åŒçš„å½¢çŠ¶è®¡ç®—æ–¹æ³•ä¸åŒã€‚ä½ å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—åœ†å½¢çš„é¢ç§¯ï¼Œæˆ‘å¯ä»¥å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—çŸ©å½¢çš„é¢ç§¯ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨è¿™ä¸ªåå­— calculateArea()ï¼Œè¿™æ ·å½“æˆ‘è°ƒç”¨ calculateArea() æ—¶ï¼Œæ ¹æ®å…·ä½“çš„å½¢çŠ¶ä¸åŒï¼Œä¼šè°ƒç”¨ä¸åŒçš„å‡½æ•°æ¥è®¡ç®—é¢ç§¯ã€‚â€

æˆ‘ä»¬ç»†å“è¿™å¥è¯ï¼Œâ€œæˆ‘ä»¬éƒ½ä½¿ç”¨è¿™ä¸ªåå­— calculateArea()ï¼Œè¿™æ ·å½“æˆ‘è°ƒç”¨ calculateArea() æ—¶ï¼Œæ ¹æ®å…·ä½“çš„å½¢çŠ¶ä¸åŒï¼Œä¼šè°ƒç”¨ä¸åŒçš„å‡½æ•°æ¥è®¡ç®—é¢ç§¯ã€‚â€ã€‚

ä»ä¸Šè¿°ä¾‹å­ï¼Œæˆ‘ä»¬åå¤è¯»è¯»ï¼Œç”¨å¿ƒæ„Ÿå—ä¸€ä¸‹è™šå‡½æ•°ã€è¦†ç›–è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚è€Œåï¼Œæˆ‘ä»¬æ¥çœ‹å®ä¾‹ï¼š

```cpp
#include <iostream>

// åŸºç±» Shape
class Shape {
public:
    // å£°æ˜è™šå‡½æ•° calculateArea()
    virtual double calculateArea() const {
        return 0.0; // åŸºç±»çš„é»˜è®¤å®ç°ï¼Œå‡è®¾é¢ç§¯ä¸º0
    }
};

// æ´¾ç”Ÿç±» Circle
class Circle : public Shape {
private:
    double radius;

public:
    // æ„é€ å‡½æ•°
    Circle(double r) : radius(r) {}

    // é‡å†™åŸºç±»çš„è™šå‡½æ•° calculateArea()
    double calculateArea() const override {
        return 3.14159 * radius * radius; // è®¡ç®—åœ†å½¢çš„é¢ç§¯
    }
};

// æ´¾ç”Ÿç±» Rectangle
class Rectangle : public Shape {
private:
    double width;
    double height;

public:
    // æ„é€ å‡½æ•°
    Rectangle(double w, double h) : width(w), height(h) {}

    // é‡å†™åŸºç±»çš„è™šå‡½æ•° calculateArea()
    double calculateArea() const override {
        return width * height; // è®¡ç®—çŸ©å½¢çš„é¢ç§¯
    }
};

int main() {
    // åˆ›å»ºä¸€ä¸ªåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡å‘ Circle å¯¹è±¡
    Shape* circle = new Circle(5.0);

    // åˆ›å»ºä¸€ä¸ªåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡å‘ Rectangle å¯¹è±¡
    Shape* rectangle = new Rectangle(4.0, 6.0);

    // é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•° calculateArea()
    std::cout << "Area of Circle: " << circle->calculateArea() << std::endl;
    std::cout << "Area of Rectangle: " << rectangle->calculateArea() << std::endl;

    // é‡Šæ”¾å†…å­˜
    delete circle;
    delete rectangle;

    return 0;
}
```

ç°åœ¨æ‹†è§£ä¸Šè¿°ä»£ç ï¼š

ç¬¬ä¸€ï¼Œå®šä¹‰åŸºç±» Shape

```cpp
class Shape {
public:
    // å£°æ˜è™šå‡½æ•° calculateArea()
    virtual double calculateArea() const {
        return 0.0; // åŸºç±»çš„é»˜è®¤å®ç°ï¼Œå‡è®¾é¢ç§¯ä¸º0
    }
};
```

- è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜ä¸ºè™šå‡½æ•°çš„æˆå‘˜å‡½æ•°ã€‚
- åœ¨æ´¾ç”Ÿç±»ä¸­å¯ä»¥é‡å†™ï¼ˆè¦†ç›–ï¼‰åŸºç±»çš„è™šå‡½æ•°ï¼Œä»¥å®ç°ä¸åŒçš„è¡Œä¸ºã€‚

ç¬¬äºŒï¼Œå®šä¹‰æ´¾ç”Ÿç±»

```cpp
class Circle : public Shape {
private:
    double radius;

public:
    // æ„é€ å‡½æ•°
    Circle(double r) : radius(r) {}

    // é‡å†™åŸºç±»çš„è™šå‡½æ•° calculateArea()
    double calculateArea() const override {
        return 3.14159 * radius * radius; // è®¡ç®—åœ†å½¢çš„é¢ç§¯
    }
};
```

åœ¨C++ä¸­ï¼Œæ´¾ç”Ÿç±»ï¼ˆä¹Ÿç§°ä¸ºå­ç±»ï¼‰æ˜¯ä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºç±»ï¼ˆä¹Ÿç§°ä¸ºçˆ¶ç±»ï¼‰ç»§æ‰¿å±æ€§å’Œè¡Œä¸ºçš„ç±»ã€‚æ´¾ç”Ÿç±»é€šå¸¸ä¼šæ·»åŠ æ–°çš„æ–¹æ³•å’Œå±æ€§ï¼Œæˆ–è€…è¦†ç›–ï¼ˆé‡å†™ï¼‰åŸºç±»ä¸­çš„æ–¹æ³•ã€‚

æ´¾ç”Ÿç±»çš„å†™æ³•å¦‚ä¸‹ï¼š

```cpp
class DerivedClass : public BaseClass {
    // æ–°çš„æˆå‘˜å’Œæ–¹æ³•
};
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒDerivedClass æ˜¯æ´¾ç”Ÿç±»ï¼ŒBaseClass æ˜¯åŸºç±»ã€‚public å…³é”®å­—è¡¨ç¤ºç»§æ‰¿ç±»å‹æ˜¯å…¬æœ‰çš„ï¼Œè¿™æ„å‘³ç€åŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜ã€‚

åœ¨ä½ æä¾›çš„ä»£ç ä¸­ï¼ŒCircle æ˜¯ä» Shape ç±»æ´¾ç”Ÿçš„ï¼š

```cpp
class Circle : public Shape {
    // ...
};
```

Circle ç±»æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ç§æœ‰æˆå‘˜ radiusï¼Œå¹¶ä¸”é‡å†™äº†åŸºç±»çš„ calculateArea æ–¹æ³•ã€‚

å†æ¥çœ‹çœ‹ï¼Œ`override` çš„ç”¨æ³•ï¼š

```cpp
class DerivedClass : public BaseClass {
public:
    returnType functionName(parameters) override {
        // å‡½æ•°ä½“
    }
};
```

å…·ä½“åŒ–ï¼Œ

```cpp
double calculateArea() const override {
        return 3.14159 * radius * radius; // è®¡ç®—åœ†å½¢çš„é¢ç§¯
    }
```

ç¬¬ä¸‰ï¼Œçœ‹ main å‡½æ•°æ€ä¹ˆå†™

```cpp
int main() {
    // åˆ›å»ºä¸€ä¸ªåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡å‘ Circle å¯¹è±¡
    Shape* circle = new Circle(5.0);

    // åˆ›å»ºä¸€ä¸ªåŸºç±»æŒ‡é’ˆï¼ŒæŒ‡å‘ Rectangle å¯¹è±¡
    Shape* rectangle = new Rectangle(4.0, 6.0);

    // é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•° calculateArea()
    std::cout << "Area of Circle: " << circle->calculateArea() << std::endl;
    std::cout << "Area of Rectangle: " << rectangle->calculateArea() << std::endl;

    // é‡Šæ”¾å†…å­˜
    delete circle;
    delete rectangle;

    return 0;
}
```

è¿™é‡ŒåŸºç±»æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ å°±æ˜¯ï¼Œé€šè¿‡æŒ‡å‘åŸºç±»å¯¹è±¡æˆ–å…¶æ´¾ç”Ÿç±»å¯¹è±¡çš„æŒ‡é’ˆï¼Œå®ç°å¯¹è¿™äº›å¯¹è±¡çš„è®¿é—®å’Œæ“ä½œã€‚å…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š

1. **è¯­æ³•**ï¼š

- å£°æ˜ä¸€ä¸ªåŸºç±»æŒ‡é’ˆçš„è¯­æ³•ä¸ºï¼š**BaseClass\* ptr;**

```cpp
Shape* circle = new Circle(5.0);
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª Shape ç±»å‹çš„æŒ‡é’ˆ circleï¼Œå¹¶ä½¿å…¶æŒ‡å‘ä¸€ä¸ªæ–°åˆ›å»ºçš„ Circle å¯¹è±¡ã€‚

- å°†æŒ‡é’ˆæŒ‡å‘æ´¾ç”Ÿç±»å¯¹è±¡çš„è¯­æ³•ä¸ºï¼š**ptr = &derivedObject;**

è¿™é‡Œå¯ä»¥è¿™æ ·ç†è§£ï¼Œç±»ä¼¼äºå‰é¢å¸¸è§çš„æŒ‡é’ˆç”¨æ³•ã€‚

```c
int num;
int *pnum;
punm=&num;
*punm=5;
```

1. **æŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„å«ä¹‰**ï¼š

- å½“**åŸºç±»æŒ‡é’ˆæŒ‡å‘å¯¹è±¡æ—¶**ï¼Œæ„å‘³ç€è¯¥æŒ‡é’ˆå¯ä»¥é€šè¿‡åŸºç±»çš„æ¥å£æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡çš„æˆå‘˜å’Œæ–¹æ³•ã€‚
- å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„æ˜¯åŸºç±»å¯¹è±¡ï¼Œåˆ™åªèƒ½è®¿é—®åŸºç±»çš„æˆå‘˜å’Œæ–¹æ³•ã€‚
- å¦‚æœæŒ‡é’ˆæŒ‡å‘çš„æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ï¼Œåˆ™å¯ä»¥è®¿é—®åŸºç±»å’Œæ´¾ç”Ÿç±»çš„æˆå‘˜å’Œæ–¹æ³•ã€‚ä½†æ˜¯ï¼Œå¦‚æœé€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨äº†è™šå‡½æ•°ï¼Œä¼šæ ¹æ®å¯¹è±¡çš„å®é™…ç±»å‹æ¥åŠ¨æ€é€‰æ‹©è°ƒç”¨å¯¹åº”çš„å‡½æ•°ç‰ˆæœ¬ï¼Œå®ç°äº†å¤šæ€æ€§ã€‚

```cpp
// é€šè¿‡åŸºç±»æŒ‡é’ˆè°ƒç”¨è™šå‡½æ•° calculateArea()
    std::cout << "Area of Circle: " << circle->calculateArea() << std::endl;
    std::cout << "Area of Rectangle: " << rectangle->calculateArea() << std::endl;
```

ç„¶åï¼Œé€šè¿‡è¿™ä¸¤ä¸ªåŸºç±»æŒ‡é’ˆï¼Œè°ƒç”¨äº† calculateArea è™šå‡½æ•°ã€‚**ç”±äº calculateArea æ˜¯è™šå‡½æ•°ï¼Œæ‰€ä»¥å®é™…è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±» Circle å’Œ Rectangle ä¸­çš„ calculateArea å‡½æ•°**ï¼Œè€Œä¸æ˜¯åŸºç±» Shape ä¸­çš„ calculateArea å‡½æ•°ã€‚è¿™å°±æ˜¯å¤šæ€æ€§çš„ä½“ç°ã€‚



å…·ä½“æ¥è¯´ï¼Œ**å¤šæ€æ€§å¯ä»¥é€šè¿‡è™šå‡½æ•°å’ŒåŸºç±»æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰å®ç°**ã€‚å½“æ´¾ç”Ÿç±»é‡å†™åŸºç±»çš„è™šå‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡åŸºç±»æŒ‡é’ˆæˆ–å¼•ç”¨æ¥è°ƒç”¨è¿™ä¸ªè™šå‡½æ•°ï¼Œå®é™…è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»ä¸­é‡å†™çš„ç‰ˆæœ¬ã€‚è¿™æ ·çš„è¡Œä¸ºä½¿å¾—åœ¨ç¼–å†™ä»£ç æ—¶æ— éœ€çŸ¥é“å¯¹è±¡çš„å…·ä½“ç±»å‹ï¼Œè€Œå¯ä»¥é€šè¿‡åŸºç±»æ¥å£æ¥æ“ä½œå¯¹è±¡ï¼Œä»è€Œå®ç°äº†å¯¹ä¸åŒç±»å‹å¯¹è±¡çš„ç»Ÿä¸€å¤„ç†ã€‚

è‡³æ­¤ï¼Œè™šå‡½æ•°ä¸å¤šæ€æ€§å°±è¯´æ¸…æ¥šäº†ã€‚

## 6.çº¯è™šå‡½æ•°ä¸æ¥å£ç»§æ‰¿

p134 ä¹¦ä¸­æ¦‚å¿µè¿˜æ˜¯è®²çš„ä¸€å¦‚æ—¢å¾€çš„æŠ½è±¡ï¼Œçœ‹å®Œä¹¦ä¸­çš„ demoï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ª demoï¼š

![img](https://img.imotao.com/i/2024/03/28/660455015f0fb.png)

å…ˆçœ‹è¿™æ®µï¼ŒåŸºç±» Shape æ²¡æœ‰æ•°æ®æˆå‘˜ï¼Œæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œå°±å†™äº†ä¸ªè™šå‡½æ•°ã€‚è¿™é‡Œçš„è™šå‡½æ•°å°±æ˜¯çº¯è™šå‡½æ•°ï¼Œè¿™ä¸ªåŸºç±» Shape å°±æ˜¯æ¥åšçº¯ç²¹çš„æ¥å£çš„ï¼Œå¯ä»¥æŠŠè¿™å°±ç†è§£æˆæ¥å£ç»§æ‰¿ã€‚

```cpp
// åŸºç±» Shape
class Shape {
public:
    // çº¯è™šå‡½æ•°ï¼Œç”¨äºè¡¨ç¤ºæ¥å£ç»§æ‰¿
    virtual void draw() const = 0;
};

// æ´¾ç”Ÿç±» Circle
class Circle : public Shape {
public:
    // é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•° draw()
    void draw() const override {
        std::cout << "Drawing a circle." << std::endl;
    }
};
#include <iostream>

// åŸºç±» Shape
class Shape {
public:
    // çº¯è™šå‡½æ•°ï¼Œç”¨äºè¡¨ç¤ºæ¥å£ç»§æ‰¿
    virtual void draw() const = 0;
};

// æ´¾ç”Ÿç±» Circle
class Circle : public Shape {
public:
    // é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•° draw()
    void draw() const override {
        std::cout << "Drawing a circle." << std::endl;
    }
};

// æ´¾ç”Ÿç±» Rectangle
class Rectangle : public Shape {
public:
    // é‡å†™åŸºç±»çš„çº¯è™šå‡½æ•° draw()
    void draw() const override {
        std::cout << "Drawing a rectangle." << std::endl;
    }
};

int main() {
    // åˆ›å»º Circle å’Œ Rectangle å¯¹è±¡
    Circle circle;
    Rectangle rectangle;

    // ä½¿ç”¨åŸºç±»æŒ‡é’ˆè°ƒç”¨çº¯è™šå‡½æ•° draw()ï¼Œå®ç°äº†å¤šæ€æ€§
    Shape* ptr1 = &circle;
    Shape* ptr2 = &rectangle;
    
    ptr1->draw(); // è°ƒç”¨ Circle ç±»ä¸­çš„ draw() å‡½æ•°
    ptr2->draw(); // è°ƒç”¨ Rectangle ç±»ä¸­çš„ draw() å‡½æ•°

    return 0;
}
```

## 7.ç†å¿µä¸å†å²

### 7.1 å…¶ä»–è¯­è¨€

p182 æœ¬ç« å†…å®¹ä¸ºæˆ‘è®¤ä¸ºæœ€é‡è¦çš„éƒ¨åˆ†å°±åœ¨æ­¤æ®µ B.S. çš„è®ºè¿°ï¼Œä¸Šåˆç‰¹æ„å½•åˆ¶äº†å¯¹æ­¤æ®µå†…å®¹çš„ä½“ä¼šçš„éŸ³é¢‘ï¼Œè€Œåå‘å¸ƒåœ¨å°å®‡å®™ã€‚

![img](https://img.imotao.com/i/2024/03/28/6604550762de2.png)

æ ¹æ®æ­¤ï¼Œå†æ¥çœ‹çœ‹è‡ªå·±çš„å­¦ä¹ è·¯çº¿ï¼Œä¹Ÿèµ°äº†ä¸å°‘å¼¯è·¯ï¼Œè¿™å°±æ˜¯ä¸Šè¿°è¯´çš„è¿™äº›â€œä¼¼æ˜¯è€Œéâ€çš„å†…å®¹ã€‚çœŸæ­£æœ‰æ„ä¹‰çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯ç»è¿‡å®è·µæ£€éªŒï¼Œç»è¿‡æ—¶é—´æ²‰æ·€çš„ä¸œè¥¿ï¼Œè€Œ C++ å¯ä»¥è¯´æ­£æ˜¯ç¬¦åˆè¿™ä¸ªè¦æ±‚ã€‚å›é¡¾è‡ªå·±åŠä¸ªæœˆæ¥çš„å­¦ä¹ å†ç¨‹ï¼Œæ·±æ„Ÿâ€œæŠ½è±¡â€äºŒå­—ã€‚  è¿˜æœ‰å°±æ˜¯ï¼Œparadigm å¤šèŒƒå¼ï¼Œè¿™ä¸ªè¦åœ¨å…·ä½“çš„åœºæ™¯å’Œä»»åŠ¡ä¸­å»ä½“ä¼šï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼Œåœ¨ä¸€ä¸ªå¤§å‹çš„ä»»åŠ¡ä¸­ï¼Œå¼•å…¥å¤šä¸ªè®¾è®¡èŒƒå¼ï¼Œè€Œ C++ æ­£å¥½æ˜¯æ”¯æŒå¤šèŒƒå¼çš„ã€‚



p191 B.S. è¿™æ®µè®ºè¿°ï¼Œå¯ä»¥å¥½å¥½çœ‹çœ‹ï¼Œæˆ‘ä»¬å¼ºè°ƒä¸è¯­è¨€ç›¸å…³è”çš„å…³é”®äººç‰©ã€‚å…·ä½“å¯ä»¥çœ‹çœ‹ï¼Œå¾ˆæœ‰æ‰¹åˆ¤æ€§çš„ä¸€æ®µè®ºè¿°ã€‚

![img](https://img.imotao.com/i/2024/03/28/660455070d25a.png)


p206 äº†è§£ C è¯­è¨€å‘å±•å†å²çš„ä¸€æ®µå¾ˆæœ‰æ„æ€çš„æˆ‘æ–‡å­—ï¼Œ

![img](https://img.imotao.com/i/2024/03/28/66045505e09c5.png)

### 7.2 C++è¯­è¨€

p192

![img](https://img.imotao.com/i/2024/03/28/66045509c92fb.png)


p208

![img](https://img.imotao.com/i/2024/03/28/66045508e73fd.png)

é€šè¿‡ä¸Šè¿°å†…å®¹ï¼Œæˆ‘ä»¬çŸ¥é“ 3 ä¸ªéå¸¸é‡è¦çš„äººç‰©ï¼Œä¸€ä¸ªæ˜¯ B.S. ã€ ä¸€ä¸ªæ˜¯ David Wheeler å’Œ Alexander Stepanovï¼ŒB.S. æ˜¯ David Wheeler çš„å­¦ç”Ÿï¼Œè¿™é‡Œæƒ³è¯´çœŸçš„åšå­¦æœ¯æŒºé‡è¦çš„ B.S. å­¦æœ¯åŠŸåº•å¾ˆåšï¼Œåšå‡º C++ ä¹Ÿä¸è¶³ä¸ºå¥‡ï¼Œå°±æ˜¯çœŸçš„è¦å¥½å¥½è¯»ä¹¦ï¼Œè¦æœ‰å­¦ç•Œçš„ç§¯æ·€ã€‚

---
**æ›´æ–°äº**ï¼š2024å¹´3æœˆ28æ—¥